<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://ofbiz.apache.org/Widget-Screen"
	xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

	<screen name="main">
		<section>
			<actions>
				<set field="headerItem" value="main" /><!-- this highlights the selected 
					menu-item with name "main" -->
			</actions>
			<widgets>
				<decorator-screen name="VffacilityCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>


	<screen name="EditFacility">
		<section>
			<actions>
				<set field="titleProperty" value="ProductNewFacility" />
				<set field="headerItem" value="facility" />
				<set field="tabButtonItem" value="EditFacility" />
				<script
					location="component://product/groovyScripts/facility/facility/EditFacility.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<not>
							<if-empty field="facility" />
						</not>
					</condition>
					<actions>
						<set field="titleProperty" value="ProductEditFacility" />
					</actions>
					<widgets>
						<decorator-screen name="VffacilityCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<section>
									<condition>
										<if-service-permission service-name="vffacilityGenericPermission"
											main-action="VIEW" />
									</condition>
									<widgets>
										<section>
											<condition>
												<not>
													<if-empty field="facilityId" />
												</not>
											</condition>
											<widgets>
												<container style="page-title">
													<label>${uiLabelMap.ProductEditFacility}
														${facility.facilityName} [${facilityId}]</label>
												</container>
												<container style="button-bar button-style-1">
													<link target="/workeffort/control/calendar" text="${uiLabelMap.CommonViewCalendar}"
														url-mode="inter-app">
														<parameter param-name="facilityId" />
														<parameter param-name="externalLoginKey"
															from-field="parameters.externalLoginKey" />
													</link>
												</container>
												<platform-specific>
													<html>
														<html-template
															location="component://product/template/facility/EditFacility.ftl" />
													</html>
												</platform-specific>
											</widgets>
										</section>
									</widgets>
									<fail-widgets>
										<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
										</label>
									</fail-widgets>
								</section>
							</decorator-section>
						</decorator-screen>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<section>
									<condition>
										<if-service-permission service-name="vffacilityGenericPermission"
											main-action="VIEW" />
									</condition>
									<widgets>
										<label style="h1">${uiLabelMap.ProductNewFacility}</label>
										<platform-specific>
											<html>
												<html-template
													location="component://product/template/facility/EditFacility.ftl" />
											</html>
										</platform-specific>
									</widgets>
									<fail-widgets>
										<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
										</label>
									</fail-widgets>
								</section>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="FindFacility">
		<section>
			<actions>
				<set field="titleProperty" value="ProductFindFacilities" />
				<set field="headerItem" value="facility" />
				<script
					location="component://vffacility/groovyScripts/FindFacility.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="main-decorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-service-permission service-name="vffacilityGenericPermission"
									main-action="VIEW" />
							</condition>
							<widgets>
								<section>
									<condition>
										<if-compare field="showScreen" value="one"
											operator="equals" />
									</condition>
									<actions>
										<script
											location="component://product/groovyScripts/facility/facility/EditFacility.groovy" />
									</actions>
									<widgets>
										<section>
											<condition>
												<if-service-permission service-name="facilityGenericPermission"
													main-action="VIEW" />
											</condition>
											<widgets>
												<include-menu name="FacilityTabBar"
													location="component://vffacility/widget/VffacilityMenus.xml" />
												<section>
													<condition>
														<not>
															<if-empty field="facilityId" />
														</not>
													</condition>
													<widgets>
														<container style="button-bar">
															<link target="/workeffort/control/calendar" text="${uiLabelMap.CommonViewCalendar}"
																style="buttontext" url-mode="inter-app">
																<parameter param-name="facilityId" />
																<parameter param-name="externalLoginKey"
																	from-field="parameters.externalLoginKey" />
															</link>
														</container>
														<label style="h1">${uiLabelMap.ProductEditFacility}
															${facility.facilityName} [${facilityId}]</label>
														<platform-specific>
															<html>
																<html-template
																	location="component://product/template/facility/EditFacility.ftl" />
															</html>
														</platform-specific>
													</widgets>
													<fail-widgets>
														<label style="h1">${uiLabelMap.ProductNewFacility}"
														</label>
														<platform-specific>
															<html>
																<html-template
																	location="component://product/template/facility/EditFacility.ftl" />
															</html>
														</platform-specific>
													</fail-widgets>
												</section>
											</widgets>
											<fail-widgets>
												<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
												</label>
											</fail-widgets>
										</section>
									</widgets>
								</section>
								<section>
									<condition>
										<if-compare field="showScreen" value="ten"
											operator="equals" />
									</condition>
									<widgets>
										<label text="${uiLabelMap.FacilitySelection}" style="h1" />
										<screenlet>
											<include-form name="FindFacility10"
												location="component://product/widget/facility/FacilityForms.xml" />
										</screenlet>
									</widgets>
								</section>
								<section>
									<condition>
										<if-compare field="showScreen" value="more"
											operator="equals" />
									</condition>
									<widgets>
										<decorator-screen name="FindScreenDecorator"
											location="component://common/widget/CommonScreens.xml">
											<decorator-section name="search-options">
												<include-form name="FindFacilityOptions"
													location="component://product/widget/facility/FacilityForms.xml" />
											</decorator-section>
											<decorator-section name="search-results">
												<include-screen name="FacilitySearchResults" />
											</decorator-section>
										</decorator-screen>
									</widgets>
								</section>
							</widgets>
							<fail-widgets>
								<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
								</label>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="EditFacilityInventoryItems">
        <section>
            <actions>
                <set field="tabButtonItem" value="EditFacilityInventoryItems"/>
                <property-to-field resource="widget" property="widget.form.defaultViewSize" field="viewSizeDefaultValue"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="${viewSizeDefaultValue}"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleEditFacilityInventoryItems}"/>
            </actions>
            <widgets>
                <decorator-screen name="VffacilityCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="menu-bar">
                                <container style="button-bar">
                                    <link target="EditInventoryItem" text="${uiLabelMap.ProductNewInventoryItem}" style="buttontext create">
                                        <parameter param-name="facilityId" from-field="parameters.facilityId"/>
                                    </link>
                                    <link target="SearchInventoryItemsByLabels" text="${uiLabelMap.ProductSearchInventoryItemsByLabels}" style="buttontext search">
                                        <parameter param-name="facilityId" from-field="parameters.facilityId"/>
                                    </link>
                                </container>
                            </decorator-section>
                            <decorator-section name="search-options">
                                <include-form name="SearchInventoryItemsParams" location="component://product/widget/facility/FacilityForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                                <include-form name="ListFacilityInventoryItems" location="component://product/widget/facility/FacilityForms.xml"/>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

</screens>